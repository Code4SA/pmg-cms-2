{% extends "base.html" %}

{% block title %}{{ title }} | PMG{% endblock %}

{% block page %}
<h1><i class="fa fa-icon fa-{{ icon }}"></i> {{ title }}</h1>

<div class="space-bottom">
  <div class="row">
    <div class="col-md-6">
      <form action="/search">
        <input type="hidden" name="filter[type]" value="{{content_type}}">
        <div class="input-group">
          <input type="text" name="q" placeholder="Search in {{title}}" class="form-control">
          <span class="input-group-btn">
            <button type="submit" class="btn btn-success">Search</button>
          </span>
        </div>
      </form>
    </div>
    {% if committees %}
    <div class="col-md-6">
      <form>
        {% include 'committee_select.html' %}
      </form>
    </div>
    {% endif %}

    {% if content_type == 'hansard' %}
    <div class="col-md-6">
      <a href="{{ url_for('page', pagename='previous-years-programmes') }}">Previous years' parliamentary programmes</a>
    </div>
  </div>
  <div class="row filter">
    <div class="col-md-6">
      Filter by house
      <select class="select-house" onchange="window.location.href = '/hansards?filter[house_id]=' + this.value">
        <option value="#">All</option>
        {% for house in houses %}
        <option value="{{ house.id }}">{{ house.name }}</option>
        {% endfor %}
      </select>
    </div>
    {% endif %}
  </div>
</div>

{% if content_type != 'call_for_comment' %}
<ul class="list-unstyled item-list content-list {{content_type}}-list">
  {% for result in results %}
    <li>{% include content_type | replace("-", "_") + '_stub.html' %}</li>
  {% endfor %}
</ul>
{% endif %}

{% if content_type == 'call_for_comment' %}

<span class="no-open-hidden">
  <h2>Open calls for comments <small class="open-calls-count">Currently open: <span id="count"></span></small></h2>
</span>
<div class="row item-cards {{content_type}}-row">
  {% for result in open_calls %}
    <div class="col-xs-12 col-sm-6 col-lg-4 col-card">
      <div class="card-wrap">
        {% include content_type | replace("-", "_") + '_stub.html' %}
      </div>
    </div>
  {% endfor %}
</div>

<hr class="no-open-hidden">

<h2>Closed calls for comments</h2>
<div class="row item-cards {{content_type}}-row">
  {% for result in closed_calls %}
    <div class="col-xs-12 col-sm-6 col-lg-4 col-card">
      <div class="card-wrap">
        {% include content_type | replace("-", "_") + '_stub.html' %}
      </div>
    </div>
  {% endfor %}
</div>

{% endif %}

{% include 'pagination.html' %}

{% endblock page %}
