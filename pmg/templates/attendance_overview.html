{% extends "base.html" %}

{% block title %}Committee Meeting Attendance Overview | PMG{% endblock %}

{% block page %}
<section class="committee-attendance-overview">
  <div class="container">
    <h1>2017 attendance stats</h1>
    <table class="table table-hover sortable">
      <thead>
        <th>Rank</th>
        <th>Committee</th>
        <th>Number of meetings</th>
        <th data-defaultsort="desc">Attendance</th>
        <th>Since 2016</th>
      </thead>
      {% for overview in attendance_overview %}
      <tr>
        <td>{{ loop.index }}</td>
        <td>{{ overview[0] }}</td>
        <td>{{ overview[1] }}</td>
        <td>
          <div class="progress">
            <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="{{ overview[3] }}" aria-valuemin="0" aria-valuemax="100" style="width: {{ overview[3] }}%;">
              {{ overview[3] }}%
            </div>
          </div>
        </td>
        <td class="attendance-change" data-value="{{ overview[2] }}">
          <div class="value" style="
            {% if overview[2] < 0 %}right: calc(50% + {{ overview[2]|abs }}% + 3px){% endif %}
            {% if overview[2] >= 0 %}left: calc(50% + {{ overview[2]|abs }}% + 3px){% endif %}
          ">
            {% if overview[2] > 0 %}+{% endif %}{{ overview [2] }}%
          </div>
          <div class="centre-line"></div>
          <div class="bar" style="
            background-color: {% if overview[2] < 0 %}#d9534f{% endif %};
            float:{% if overview[2] < 0 %}right{% endif %};
            width: {% if overview[2] > 0 %}calc(1px + {{ overview[2]|abs }}%){% else %}{{ overview[2]|abs }}%{% endif %};
            margin-{% if overview[2] < 0 %}right{% else %}left{% endif %}: 50%;
            border-radius: {% if overview[2] < 0 %}4px 0 0 4px{% else %}0 4px 4px 0{% endif %}
            ">
          </div>
        </td>
      </tr>
      {% endfor %}
    </table> 
    
  </div>

</section>


{% endblock %}
