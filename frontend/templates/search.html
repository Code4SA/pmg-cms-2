{% extends "base.html" %}

{% block page %}

<h3 class="red"><span class="fa fa-search"></span> Search</h3>

<div class="row">
	<div class="col-sm-3">
		{% block top_links %}
		<form>
			<input type="hidden" name="q" value="{{ q }}">
			<input type="hidden" name="filter[start_date]" value="{{ filters.start_date }}">
			<input type="hidden" name="filter[end_date]" value="{{ filters.end_date }}">
			<input type="hidden" name="filter[type]" value="{{ filters.type }}">
			{% include 'committee_select.html' %}
		</form>

		<ul class="nav nav-pills nav-stacked" role="tablist">
			<li role="presentation" {% if (filters.type == None) %}class="active"{% endif %}><a href="{{ url }}/?q={{ q }}&amp;filter[start_date]={{filters['start_date']}}&amp;filter[end_date]={{filters['end_date']}}">All Types</a></li>

			{% for data_type, name in search_types %}
				{% if bincount[data_type] %}
				<li role="presentation" {% if (filters.type == data_type) %}class="active"{% endif %}><a href="{{ url }}/?q={{ q }}&amp;filter[type]={{ data_type }}&amp;filter[start_date]={{filters['start_date']}}&amp;filter[end_date]={{filters['end_date']}}">{{ name }} <span class="label label-default bincount">{{ bincount[data_type] }}</span></a></li>
				{% endif %}
			{% endfor %}
		</ul>

		<ul class="nav nav-pills nav-stacked" role="tablist">
			<li role="presentation" {% if (filters["start_date"] == None) %}class="active"{% endif %}><a href="{{ url }}/?q={{ q }}&amp;filter[type]={{filters.type}}">All Dates</a></li>
			{% for year in years %}
			{% if yearcount[year] %}
			<li role="presentation" {% if (filters["start_date"] == year|string + "-01-01") %}class="active"{% endif %}><a href="{{ url }}/?q={{ q }}&amp;filter[type]={{filters.type}}&amp;filter[start_date]={{year}}-01-01&amp;filter[end_date]={{year}}-12-31">{{year}} <span class="label label-default bincount">{{ yearcount[year] }}</span></a></li>
			{% endif %}
			{% endfor %}
		</ul>
		{% endblock %}
	</div>

	<div class="col-sm-9 justify-p">
		<h5>Total Results: {{ count }}</h5>
		<table class="table table-striped table-bordered">
			{% for result in results %}
			<tr>
				<td>
					{% include result._type + '_stub.html' %}
				</td>
			</tr>
			{% endfor %}
		</table>

		{% include 'pagination.html' %}
	</div>
</div>


{% endblock %}

